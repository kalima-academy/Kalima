<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Kalima ‚Äî ŸÖÿ¨ŸÖŸàÿπÿ©: ÿ£ ÿ® ÿ™ ÿ´</title>

  <style>
    :root{
      --brand-red:#5D1828;
      --brand-gold:#C8A462;
      --bg:#faf7f3;
      --text:#1d1d1d;
      --muted:#6b6b6b;
      --card:#ffffff;
      --shadow: 0 10px 30px rgba(0,0,0,.10);
      --radius: 16px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, "Noto Naskh Arabic", "Noto Sans Arabic", sans-serif;
      direction: rtl;
    }

    header{
      position: sticky;
      top:0;
      z-index: 5;
      background: linear-gradient(180deg, rgba(250,247,243,.98), rgba(250,247,243,.80));
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(0,0,0,.06);
    }

    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 16px;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap: 12px;
      min-width: 0;
    }

    .logo{
      width: 44px; height: 44px;
      border-radius: 12px;
      background: radial-gradient(circle at 30% 30%, var(--brand-gold), var(--brand-red));
      display:grid; place-items:center;
      box-shadow: var(--shadow);
      flex: 0 0 auto;
      overflow:hidden;
    }
    .logo img{ width:100%; height:100%; object-fit:cover; display:block; }

    .brand h1{
      margin:0;
      font-size: 16px;
      line-height: 1.2;
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }
    .brand p{
      margin:0;
      color:var(--muted);
      font-size: 12px;
    }

    .pill{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap: wrap;
      justify-content:flex-start;
    }
    .badge{
      background: #fff;
      border: 1px solid rgba(0,0,0,.08);
      padding: 8px 10px;
      border-radius: 999px;
      font-size: 12px;
      box-shadow: 0 6px 16px rgba(0,0,0,.06);
    }

    .btn{
      appearance:none;
      border:0;
      border-radius: 12px;
      padding: 10px 12px;
      font-weight: 700;
      cursor:pointer;
      box-shadow: 0 8px 18px rgba(0,0,0,.10);
      background: var(--brand-red);
      color:#fff;
      display:inline-flex;
      align-items:center;
      gap:8px;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }
    .btn.secondary{
      background:#fff;
      color: var(--brand-red);
      border: 1px solid rgba(0,0,0,.10);
      box-shadow: 0 8px 18px rgba(0,0,0,.06);
    }
    .btn:active{ transform: translateY(1px); }

    main .grid{
      display:grid;
      gap: 16px;
      grid-template-columns: 1.2fr .8fr;
      align-items:start;
      margin-top: 16px;
    }
    @media (max-width: 900px){
      main .grid{ grid-template-columns: 1fr; }
    }

    .card{
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px;
      border: 1px solid rgba(0,0,0,.06);
    }

    .card h2{
      margin: 0 0 10px 0;
      font-size: 16px;
      color: var(--brand-red);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }
    .sub{
      margin: 0 0 14px 0;
      color: var(--muted);
      font-size: 13px;
      line-height:1.5;
    }

    .letters{
      display:grid;
      grid-template-columns: repeat(4, minmax(0,1fr));
      gap: 12px;
    }
    .letter{
      border-radius: 14px;
      border: 1px solid rgba(0,0,0,.08);
      padding: 14px 10px;
      background:#fff;
      text-align:center;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
      transition: transform .12s ease, box-shadow .12s ease;
    }
    .letter:hover{ transform: translateY(-1px); }
    .letter .ch{
      font-size: 42px;
      line-height: 1;
      font-weight: 800;
      color: var(--brand-red);
    }
    .letter .name{
      margin-top: 8px;
      font-size: 13px;
      color: var(--muted);
      direction: rtl;
    }

    .lessonRow{
      display:flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 12px;
    }

    .gameArea{
      display:flex;
      flex-direction: column;
      gap: 12px;
    }

    .prompt{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      padding: 14px;
      background: linear-gradient(180deg, rgba(200,164,98,.18), rgba(200,164,98,.06));
      border: 1px solid rgba(200,164,98,.40);
      border-radius: 14px;
    }
    .prompt .target{
      display:flex;
      align-items:baseline;
      gap: 12px;
      min-width: 0;
    }
    .prompt .target .big{
      font-size: 44px;
      font-weight: 900;
      color: var(--brand-red);
      line-height:1;
    }
    .prompt .target .small{
      font-size: 14px;
      color: var(--muted);
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }

    .options{
      display:grid;
      grid-template-columns: repeat(4, minmax(0,1fr));
      gap: 12px;
    }

    .opt{
      border-radius: 14px;
      border: 1px solid rgba(0,0,0,.08);
      padding: 18px 10px;
      background:#fff;
      text-align:center;
      cursor:pointer;
      user-select:none;
      font-size: 36px;
      font-weight: 900;
      color: var(--brand-red);
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
      transition: transform .10s ease;
      position: relative;
      overflow: hidden;
    }
    .opt:active{ transform: scale(.98); }

    .shake{
      animation: shake .35s ease;
      border-color: rgba(231,76,60,.55);
    }
    @keyframes shake{
      0%,100%{ transform: translateX(0); }
      25%{ transform: translateX(6px); }
      50%{ transform: translateX(-6px); }
      75%{ transform: translateX(4px); }
    }

    .ok{
      border-color: rgba(46,204,113,.55);
      box-shadow: 0 0 0 4px rgba(46,204,113,.10) inset;
    }

    .hint{
      font-size: 12px;
      color: var(--muted);
      margin: 0;
      line-height: 1.5;
    }

    /* Modal */
    .overlay{
      position: fixed;
      inset:0;
      background: rgba(0,0,0,.40);
      display:none;
      z-index: 20;
      padding: 16px;
    }
    .overlay.show{ display:grid; place-items:center; }

    .modal{
      width:min(740px, 100%);
      background:#fff;
      border-radius: 18px;
      box-shadow: 0 20px 60px rgba(0,0,0,.25);
      border: 1px solid rgba(0,0,0,.08);
      overflow:hidden;
      position: relative;
    }
    .modal header{
      position: relative;
      background:#fff;
      border-bottom: 1px solid rgba(0,0,0,.08);
    }
    .modal .content{
      padding: 16px;
    }

    .diploma{
      border: 2px solid rgba(200,164,98,.70);
      border-radius: 16px;
      padding: 16px;
      background: linear-gradient(180deg, rgba(200,164,98,.10), rgba(255,255,255,1));
      position: relative;
      overflow:hidden;
    }
    .diploma .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
    }
    .seal{
      width: 64px; height: 64px;
      border-radius: 18px;
      background: radial-gradient(circle at 30% 30%, var(--brand-gold), var(--brand-red));
      box-shadow: 0 12px 22px rgba(0,0,0,.18);
      display:grid; place-items:center;
      color:#fff;
      font-weight: 900;
    }
    .diploma h3{
      margin: 10px 0 6px 0;
      color: var(--brand-red);
      font-size: 18px;
    }
    .diploma p{
      margin: 0;
      color: #333;
      line-height: 1.7;
      font-size: 13px;
    }

    canvas#confetti{
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 30;
      display:none;
    }
    canvas#confetti.show{ display:block; }
  </style>
</head>

<body>
  <canvas id="confetti"></canvas>

  <header>
    <div class="wrap">
      <div class="topbar">
        <div class="brand">
          <div class="logo" aria-label="Logo Kalima">
            <!-- Remplace par ton vrai logo (URL compl√®te) -->
            <!-- <img src="https://ton-site.com/logo.png" alt="Kalima"> -->
            <span style="color:#fff;font-weight:900;">ŸÉ</span>
          </div>
          <div style="min-width:0;">
            <h1>Kalima ‚Äî ŸÖÿ¨ŸÖŸàÿπÿ© ÿßŸÑÿ≠ÿ±ŸàŸÅ</h1>
            <p>ÿ£ ÿ® ÿ™ ÿ´ ‚Ä¢ Le√ßon + Jeu ‚Ä¢ iPhone friendly</p>
          </div>
        </div>

        <div class="pill">
          <span class="badge">Score: <b id="score">0</b>/4</span>
          <button class="btn secondary" id="primeBtn" type="button">üîä Activer le son iPhone</button>
          <button class="btn" id="restartBtn" type="button">‚Üª Recommencer</button>
        </div>
      </div>
    </div>
  </header>

  <main class="wrap">
    <div class="grid">
      <!-- LE√áON -->
      <section class="card">
        <h2>
          <span>Le√ßon (ÿ•ÿ≥ÿ™ŸÖÿßÿπ + ŸÜŸèÿ∑ŸÇ)</span>
          <button class="btn secondary" id="lessonAllBtn" type="button">üîä √âcouter tout</button>
        </h2>
        <p class="sub">
          Tap sur une lettre pour √©couter son nom (iPhone : active d‚Äôabord le son si besoin).
        </p>

        <div class="letters" id="lessonLetters"></div>

        <div class="lessonRow">
          <button class="btn" id="lessonRepeatBtn" type="button">üîÅ R√©p√©ter la derni√®re</button>
          <button class="btn secondary" id="stopBtn" type="button">‚èπ Stop</button>
        </div>

        <p class="hint" id="ttsStatus"></p>
      </section>

      <!-- JEU -->
      <section class="card">
        <h2>
          <span>Jeu (ÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑÿ≠ÿ±ŸÅ ÿßŸÑÿµÿ≠Ÿäÿ≠)</span>
          <span class="badge">Niveau: <b id="level">1</b></span>
        </h2>

        <div class="gameArea">
          <div class="prompt">
            <div class="target">
              <div class="big" id="targetChar">ÿ£</div>
              <div class="small" id="targetName">ÿ£ŸéŸÑŸêŸÅŸí</div>
            </div>
            <div style="display:flex;gap:10px;flex-wrap:wrap;">
              <button class="btn secondary" id="gameSpeakBtn" type="button">üîä √âcouter</button>
              <button class="btn" id="nextBtn" type="button">‚û°Ô∏è Suivant</button>
            </div>
          </div>

          <div class="options" id="options"></div>

          <p class="hint">
            Astuce iPhone: si tu n‚Äôentends pas l‚Äôarabe mais ‚ÄúMabrouk‚Äù oui, c‚Äôest souvent une voix arabe non charg√©e.
            Le bouton ‚ÄúActiver le son iPhone‚Äù force l‚Äôinitialisation.
          </p>
        </div>
      </section>
    </div>
  </main>

  <!-- VICTOIRE -->
  <div class="overlay" id="overlay" role="dialog" aria-modal="true" aria-labelledby="victoryTitle">
    <div class="modal">
      <header>
        <div class="wrap" style="padding:12px 16px;display:flex;align-items:center;justify-content:space-between;gap:10px;">
          <strong id="victoryTitle" style="color:var(--brand-red);">üéâ Mabrouk!</strong>
          <button class="btn secondary" id="closeModalBtn" type="button">‚úï Fermer</button>
        </div>
      </header>
      <div class="content">
        <div class="diploma" id="diploma">
          <div class="row">
            <div>
              <div style="color:var(--muted);font-size:12px;">Dipl√¥me Kalima</div>
              <h3>Bravo üéì ‚Äî Groupe: ÿ£ ÿ® ÿ™ ÿ´</h3>
            </div>
            <div class="seal">ŸÉ</div>
          </div>
          <p style="margin-top:10px;">
            Tu as r√©ussi le jeu et reconnu les 4 lettres de la le√ßon.<br/>
            Continue demain pour le prochain groupe üí™
          </p>
        </div>

        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px;">
          <button class="btn" id="printBtn" type="button">üñ®Ô∏è Imprimer</button>
          <button class="btn secondary" id="replayBtn" type="button">üîÅ Rejouer</button>
          <button class="btn secondary" id="victorySpeakBtn" type="button">üîä Mabrouk (son test)</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    /* =========================
       iOS SAFE TTS (SpeechSynthesis)
       ========================= */

    let cachedVoices = [];
    let voicesReady = false;
    let lastSpoken = null;

    function primeVoices() {
      cachedVoices = speechSynthesis.getVoices();
      if (cachedVoices && cachedVoices.length) voicesReady = true;

      speechSynthesis.onvoiceschanged = () => {
        cachedVoices = speechSynthesis.getVoices();
        voicesReady = true;
        updateTTSStatus();
      };
      updateTTSStatus();
    }

    // iPhone: prime on any user gesture (first click/tap)
    document.addEventListener("click", () => {
      if (!voicesReady) primeVoices();
    }, { once: true });

    function pickVoice(langStartsWith) {
      const voices = (cachedVoices && cachedVoices.length)
        ? cachedVoices
        : speechSynthesis.getVoices();

      const lower = (langStartsWith || "").toLowerCase();

      // 1) direct lang match (ar / fr / en etc.)
      let v = voices.find(x => (x.lang || "").toLowerCase().startsWith(lower));
      if (v) return v;

      // 2) name contains Arabic (some iOS voices)
      v = voices.find(x => ((x.name || "").toLowerCase().includes("arab")) || ((x.lang || "").toLowerCase().includes("ar")));
      if (lower === "ar" && v) return v;

      // 3) default fallback
      v = voices.find(x => x.default);
      return v || null;
    }

    function speakText(text, langHint = "ar") {
      if (!text) return;

      // iOS: prevent ‚Äúsilence‚Äù in repeated calls
      try { speechSynthesis.cancel(); } catch(e){}

      const u = new SpeechSynthesisUtterance(text);

      // IMPORTANT: "ar" is more compatible than "ar-SA" on iPhone
      u.lang = (langHint === "ar-SA") ? "ar" : langHint;

      const v = pickVoice(u.lang.toLowerCase().slice(0,2)); // "ar", "fr", "en"
      if (v) u.voice = v;

      lastSpoken = { text, langHint: u.lang };

      // small delay helps on iOS Safari
      setTimeout(() => {
        try { speechSynthesis.speak(u); } catch(e){}
      }, 30);
    }

    function stopSpeak(){
      try { speechSynthesis.cancel(); } catch(e){}
    }

    function updateTTSStatus(){
      const el = document.getElementById("ttsStatus");
      const voices = (cachedVoices && cachedVoices.length) ? cachedVoices : speechSynthesis.getVoices();
      const hasArabic = voices.some(v => (v.lang || "").toLowerCase().startsWith("ar"));
      el.textContent = `Voix charg√©es: ${voices.length || 0} ‚Ä¢ Voix arabe: ${hasArabic ? "oui" : "non"} ‚Ä¢ (iPhone: si non, active/dl une voix Arabe dans R√©glages)`;
    }

    /* =========================
       DATA
       ========================= */

    const levels = [
      { char: "ÿ£", name: "ÿ£ŸéŸÑŸêŸÅŸí" , speak: "ÿ£ŸéŸÑŸêŸÅŸí" },
      { char: "ÿ®", name: "ÿ®Ÿéÿßÿ°Ÿí" , speak: "ÿ®Ÿéÿßÿ°Ÿí" },
      { char: "ÿ™", name: "ÿ™Ÿéÿßÿ°Ÿí" , speak: "ÿ™Ÿéÿßÿ°Ÿí" },
      { char: "ÿ´", name: "ÿ´Ÿéÿßÿ°Ÿí" , speak: "ÿ´Ÿéÿßÿ°Ÿí" },
    ];

    // order for game progression
    let order = [0,1,2,3];
    let currentIndex = 0;
    let score = 0;

    /* =========================
       UI BUILD
       ========================= */

    const lessonLetters = document.getElementById("lessonLetters");
    const options = document.getElementById("options");
    const scoreEl = document.getElementById("score");
    const levelEl = document.getElementById("level");
    const targetCharEl = document.getElementById("targetChar");
    const targetNameEl = document.getElementById("targetName");

    function buildLesson(){
      lessonLetters.innerHTML = "";
      // display right-to-left naturally; but we keep logical order A,B,T,TH
      levels.forEach((l) => {
        const b = document.createElement("button");
        b.type = "button";
        b.className = "letter";
        b.innerHTML = `<div class="ch">${l.char}</div><div class="name">${l.name}</div>`;
        b.addEventListener("click", () => {
          speakText(l.speak, "ar");
        });
        lessonLetters.appendChild(b);
      });
    }

    function shuffle(arr){
      const a = [...arr];
      for(let i=a.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [a[i],a[j]] = [a[j],a[i]];
      }
      return a;
    }

    function renderGame(){
      const idx = order[currentIndex];
      const target = levels[idx];

      targetCharEl.textContent = target.char;
      targetNameEl.textContent = target.name;

      levelEl.textContent = String(currentIndex + 1);
      scoreEl.textContent = String(score);

      // options: shuffle all letters each level
      const ids = shuffle([0,1,2,3]);
      options.innerHTML = "";

      ids.forEach((id) => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "opt";
        btn.textContent = levels[id].char;

        btn.addEventListener("click", () => handleChoice(btn, id, idx));
        options.appendChild(btn);
      });

      // allow clicking
      options.style.pointerEvents = "auto";
    }

    function handleChoice(btn, chosenId, targetId){
      // disable multi-click spam after correct
      if (options.style.pointerEvents === "none") return;

      if (chosenId === targetId){
        btn.classList.add("ok");
        score = Math.min(4, score + 1);
        scoreEl.textContent = String(score);

        // speak letter (game)
        speakText(levels[targetId].speak, "ar");

        // lock briefly then next
        options.style.pointerEvents = "none";
        setTimeout(() => next(), 550);
      } else {
        btn.classList.remove("ok");
        btn.classList.add("shake");
        // gentle feedback: repeat target audio
        speakText(levels[targetId].speak, "ar");
        setTimeout(() => btn.classList.remove("shake"), 420);
      }
    }

    function next(){
      currentIndex++;
      if (currentIndex >= order.length){
        showVictory();
        return;
      }
      renderGame();
    }

    function resetAll(){
      stopSpeak();
      currentIndex = 0;
      score = 0;
      order = [0,1,2,3]; // keep fixed; can shuffle if you want
      renderGame();
      hideVictory();
    }

    /* =========================
       Victory + Confetti
       ========================= */

    const overlay = document.getElementById("overlay");
    const confettiCanvas = document.getElementById("confetti");
    const ctx = confettiCanvas.getContext("2d");

    let confettiParticles = [];
    let confettiRaf = null;

    function resizeCanvas(){
      confettiCanvas.width = Math.floor(window.innerWidth * devicePixelRatio);
      confettiCanvas.height = Math.floor(window.innerHeight * devicePixelRatio);
      ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
    }
    window.addEventListener("resize", resizeCanvas);

    function makeConfetti(){
      confettiParticles = Array.from({length: 160}, () => ({
        x: Math.random()*window.innerWidth,
        y: -20 - Math.random()*window.innerHeight*0.3,
        r: 2 + Math.random()*4,
        vx: -2 + Math.random()*4,
        vy: 2 + Math.random()*5,
        rot: Math.random()*Math.PI*2,
        vr: -0.15 + Math.random()*0.30,
      }));
    }

    function drawConfetti(){
      ctx.clearRect(0,0,window.innerWidth,window.innerHeight);
      for (const p of confettiParticles){
        p.x += p.vx;
        p.y += p.vy;
        p.rot += p.vr;

        // simple rect confetti (no forced colors requirement; default black is fine,
        // but we keep a subtle gold/red by using current fill style toggles WITHOUT specific palette?‚Äî
        // We'll alternate using stroke only to avoid hard-coded colors.
        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rot);
        ctx.globalAlpha = 0.9;
        ctx.fillRect(-p.r, -p.r, p.r*2.2, p.r*1.6);
        ctx.restore();

        if (p.y > window.innerHeight + 30){
          p.y = -20;
          p.x = Math.random()*window.innerWidth;
        }
      }
      confettiRaf = requestAnimationFrame(drawConfetti);
    }

    function startConfetti(){
      resizeCanvas();
      confettiCanvas.classList.add("show");
      makeConfetti();
      // Use default fill style (black). If you want brand colors later, I can set them explicitly.
      drawConfetti();
    }
    function stopConfetti(){
      confettiCanvas.classList.remove("show");
      if (confettiRaf) cancelAnimationFrame(confettiRaf);
      confettiRaf = null;
      ctx.clearRect(0,0,window.innerWidth,window.innerHeight);
    }

    function showVictory(){
      overlay.classList.add("show");
      startConfetti();
      // Speak ‚ÄúMabrouk‚Äù as a test voice (fr often available)
      speakText("Mabrouk!", "fr");
    }

    function hideVictory(){
      overlay.classList.remove("show");
      stopConfetti();
    }

    /* =========================
       Buttons wiring
       ========================= */

    document.getElementById("restartBtn").addEventListener("click", resetAll);

    document.getElementById("lessonAllBtn").addEventListener("click", async () => {
      // play all letters in order with small delays
      for (const l of levels){
        speakText(l.speak, "ar");
        await new Promise(r => setTimeout(r, 850));
      }
    });

    document.getElementById("lessonRepeatBtn").addEventListener("click", () => {
      if (lastSpoken) speakText(lastSpoken.text, lastSpoken.langHint || "ar");
    });

    document.getElementById("stopBtn").addEventListener("click", stopSpeak);

    document.getElementById("gameSpeakBtn").addEventListener("click", () => {
      const idx = order[currentIndex];
      speakText(levels[idx].speak, "ar");
    });

    document.getElementById("nextBtn").addEventListener("click", () => {
      next();
    });

    document.getElementById("closeModalBtn").addEventListener("click", hideVictory);
    document.getElementById("replayBtn").addEventListener("click", () => {
      resetAll();
    });

    document.getElementById("printBtn").addEventListener("click", () => {
      // simple print of diploma area
      const diplomaHtml = document.getElementById("diploma").outerHTML;
      const w = window.open("", "_blank");
      w.document.open();
      w.document.write(`
        <html lang="fr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
        <title>Dipl√¥me Kalima</title>
        <style>
          body{ font-family: system-ui, -apple-system, Arial; padding:20px; }
          .diploma{ border:2px solid #C8A462; border-radius:16px; padding:16px; }
        </style>
        </head><body>${diplomaHtml}</body></html>
      `);
      w.document.close();
      w.focus();
      w.print();
    });

    document.getElementById("victorySpeakBtn").addEventListener("click", () => {
      speakText("Mabrouk!", "fr");
    });

    // Manual priming button for iPhone users
    document.getElementById("primeBtn").addEventListener("click", () => {
      primeVoices();
      // test: try arab + fallback
      speakText("ÿ£ŸéŸÑŸêŸÅŸí", "ar");
      setTimeout(() => speakText("Mabrouk!", "fr"), 700);
    });

    /* =========================
       Init
       ========================= */
    buildLesson();
    primeVoices();
    renderGame();
  </script>
</body>
</html>